jQuery(document).ready((function(e){var r=member_login_data,t=r.isMemberContent,i=r.isSearchPage,n=r.siteHomeUrl,o=r.postTypeName,m=r.contentForMemberType,a=r.membersLogin,l=(r.membersSignUp,r.membersHub),u=r.membersHubFree,c=r.renewMembership,p=r.joinMembership,s=r.membershipTypes,d=r.memberHubLink,f=r.memberLoginLink,b=r.memberHubFreeLink,h=r.renewMembershipLink,g=r.joinMembershipLink,y=s&&Array.isArray(s.fullMembersHub)?s.fullMembersHub.map((function(e){return String(e).trim()})):[],v=s&&Array.isArray(s.freeMembersHub)?s.freeMembersHub.map((function(e){return String(e).trim()})):[];function _(e){if(!e||!function(e){if(!e.recordTypeId||!e.memberType||!e.membershipType)return!1;if(!["Paid","Free"].includes(e.memberType))return!1;if("string"!=typeof e.membershipType||""===e.membershipType.trim())return!1;var r=e.membershipType.trim(),t=-1!==y.indexOf(r),i=-1!==v.indexOf(r);return!((y.length||v.length)&&!t&&!i||i&&"Free"!==e.memberType||"Paid"===e.memberType&&("NA"===e.expiryDate||"NA"===e.gracePeriodDate))}(e))return"none";if(function(e,r,t){if("Free"===t&&("NA"===e||"NA"===r))return!1;if("Paid"===t&&("NA"===e||"NA"===r))return!0;var i=new Date,n=function(e){if(8!==e.length)return 0;var r=parseInt(e.substring(0,2)),t=parseInt(e.substring(2,4))-1,i=parseInt(e.substring(4,8));return new Date(i,t,r).getTime()}(r);return i.getTime()>n}(e.expiryDate,e.gracePeriodDate,e.memberType))return"expired";var r=(e.membershipType||"").trim();return-1!==y.indexOf(r)?"full":-1!==v.indexOf(r)?"free":"Paid"===e.memberType?"full":"free"}function w(e){return!e||Date.now()-e>864e5}function T(){localStorage&&(localStorage.removeItem("dv_membership_data"),localStorage.removeItem("dv_redirect_url"))}function S(){if(localStorage)try{var e=localStorage.getItem("dv_membership_data");if(e)return JSON.parse(e)}catch(e){console.error("Error parsing membership data from localStorage:",e)}return null}function x(e,r){return e&&e.url?e.url:r}function I(e,r){return e&&e.text?e.text:r}function M(e){var r=new RegExp("[?&]"+encodeURIComponent(e)+"=([^&]*)").exec(window.location.search);return null===r?"":decodeURIComponent(r[1].replace(/\+/g," "))}e((function(){var r=M("s"),s=M("error"),y=M("error_description"),v=M("RecordTypeId"),I=M("DA_Member_Type__c"),D=M("DA_Membership_Type__c"),A=M("Membership_Expiry_Date__pc"),P=M("DA_Expiry_after_grace_period__c"),H=e(".member-login-overlay");if(localStorage.getItem("dv_redirect_url"),v&&I&&D){var L={recordTypeId:v,memberType:I,membershipType:D,expiryDate:A,gracePeriodDate:P};!function(e){var r={recordTypeId:e.recordTypeId,memberType:e.memberType,membershipType:e.membershipType,expiryDate:e.expiryDate,gracePeriodDate:e.gracePeriodDate,timestamp:Date.now()};localStorage&&localStorage.setItem("dv_membership_data",JSON.stringify(r))}(L);var N=_(L),F=localStorage.getItem("dv_redirect_url");if(F&&function(e,r){if("none"===e||"expired"===e)return!1;try{var t=new URL(r,window.location.origin).pathname;return!(t.includes("/members-hub")||t.includes("/member-")||t.includes("/resource")||t.includes("/member-recipes"))||"free"===e||"full"===e}catch(e){return!1}}(N,F))return localStorage.removeItem("dv_redirect_url"),void(window.location.href=F);var k=function(e){switch(e){case"full":return x(l,d);case"free":return x(u,b);case"expired":return x(c,h);default:return x(p,g)}}(N);window.location.href=k}else{var O=S(),R=!!O;R&&O.timestamp&&w(O.timestamp)&&(T(),R=!1,O=null);var U=R?_(O):"none";if(1==t||"resource"==o||"member_recipes"==o){if(!i&&localStorage&&localStorage.setItem("dv_redirect_url",window.location.href),i||r)return void H.hide();if(!R)return void(window.location.href=x(a,f));if("none"===U||"expired"===U)return void(window.location.href="expired"===U?x(c,h):x(p,g));if(1==t&&"full_member_only"===m&&"free"===U)return void(window.location.href=x(u,b));H.hide()}else"/member-login/"===window.location.pathname||localStorage.removeItem("dv_redirect_url"),H.hide();if(s&&y)return H.show(),confirm("Error: Unable to login. Please try again.")?void(window.location.href=x(a,f)):void(window.location.href=n)}})),e(".btn-member-login").each((function(){var r=e(this),t=S(),i=!!t;i&&t.timestamp&&w(t.timestamp)&&(T(),i=!1,t=null);var n=i?_(t):"none";if(i){var o=I(l,"My Membership"),m=x(l,d);"none"===n?(o=I(p,"Join Membership"),m=x(p,g)):"expired"===n?(o=I(c,"Renew Membership"),m=x(c,h)):"free"===n?(o=I(u,"Free Member Hub"),m=x(u,b)):"full"===n&&(o=I(l,"My Membership"),m=x(l,d)),r.html("<span>"+o+"</span>"),r.attr("href",m)}else{var s=I(a,"Member Login"),y=x(a,f);r.html("<span>"+s+"</span>"),r.attr("href",y)}})),e(".btn-member-logout").each((function(){var r=e(this),t=S(),i=!!t;i&&t.timestamp&&w(t.timestamp)&&(T(),i=!1),i?r.show():r.hide()})),e(document).on("click",".btn-member-logout",(function(e){if(e.preventDefault(),confirm("Are you sure you want to log out?"))return localStorage&&(localStorage.removeItem("dv_redirect_url"),localStorage.removeItem("dv_membership_data")),void(window.location.href=n)}))}));