jQuery(document).ready((function(e){var o=member_login_data,r=o.isMemberContent,t=o.isSearchPage,n=o.memberHubLink,i=o.memberLoginLink,a=(o.sfCommunityUrl,o.siteHomeUrl),c=o.postTypeName;function m(e){for(var o=e+"=",r=document.cookie.split(";"),t=0;t<r.length;t++){for(var n=r[t];" "===n.charAt(0);)n=n.substring(1);if(0===n.indexOf(o))return n.substring(o.length,n.length)}return null}function l(e){var o=new RegExp("[?&]"+encodeURIComponent(e)+"=([^&]*)").exec(window.location.search);return null===o?"":decodeURIComponent(o[1].replace(/\+/g," "))}e((function(){var o=l("s"),u=l("error"),d=l("error_description"),f=l("code"),s=l("sfdc_community_url"),h=e(".member-login-overlay"),g=localStorage.getItem("dv_redirect_url"),p=m("sf_auth_code");if(1==r||"resource"==c||"member_recipes"==c){if(!t&&localStorage&&localStorage.setItem("dv_redirect_url",window.location.href),t||o)return void h.hide();if(!p||""===p.trim())return void(window.location.href=i);f&&s?h.show():h.hide()}else"/member-login/"===window.location.pathname||localStorage.removeItem("dv_redirect_url"),h.hide();if(u&&d)return h.show(),confirm("Error: Unable to login. Please try again.")?void(window.location.href=i):void(window.location.href=a);f&&s&&(h.show(),function(e,o,r){if("string"!=typeof o||""===o.trim())return!1;var t="";if(r){var n=new Date;n.setTime(n.getTime()+24*r*60*60*1e3),t="; expires="+n.toUTCString()}return document.cookie=e+"="+encodeURIComponent(o)+t+"; path=/",-1!==document.cookie.indexOf(e+"="+encodeURIComponent(o))}("sf_auth_code",f,1))&&(window.location.href=g||n)})),e(".btn-member-login").each((function(){var o=e(this),r=m("sf_auth_code");r&&""!==r.trim()?(o.html("<span>My Membership<span>"),o.attr("href",n)):(o.html("<span>Member Login<span>"),o.attr("href",i))})),e(".btn-member-logout").each((function(){var o=e(this),r=m("sf_auth_code");r&&""!==r.trim()?o.show():o.hide()})),e(document).on("click",".btn-member-logout",(function(e){if(e.preventDefault(),confirm("Are you sure you want to log out?")){if(o="sf_auth_code",document.cookie=o+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/;",-1===document.cookie.indexOf(o+"="))return void(window.location.href=a);alert("Error: Unable to log out. Please try again.")}var o}))}));