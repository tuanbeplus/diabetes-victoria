jQuery(document).ready((function(e){var r=member_login_data,n=r.isMemberContent,t=r.isSearchPage,o=r.siteHomeUrl,i=r.postTypeName,a=r.contentForMemberType,m=r.membersLogin,c=(r.membersSignUp,r.membersHub),l=r.membersHubFree,u=r.renewMembership,d=r.joinMembership,p=r.memberHubLink,s=r.memberLoginLink,b=r.memberHubFreeLink,f=r.renewMembershipLink,h=r.joinMembershipLink;function g(e){return e&&function(e){return!!(e.recordTypeId&&e.memberType&&e.membershipType)&&"NA"!==e.expiryDate&&"NA"!==e.gracePeriodDate&&!!["Paid","Free"].includes(e.memberType)&&"string"==typeof e.membershipType&&""!==e.membershipType.trim()}(e)?function(e,r){if("NA"===e||"NA"===r)return!0;var n=new Date,t=function(e){if(8!==e.length)return 0;var r=parseInt(e.substring(0,2)),n=parseInt(e.substring(2,4))-1,t=parseInt(e.substring(4,8));return new Date(t,n,r).getTime()}(r);return n.getTime()>t}(e.expiryDate,e.gracePeriodDate)?"expired":"Paid"===e.memberType?"full":"free":"none"}function _(){if(localStorage)try{var e=localStorage.getItem("dv_membership_data");if(e)return JSON.parse(e)}catch(e){console.error("Error parsing membership data from localStorage:",e)}return null}function y(e,r){return e&&e.url?e.url:r}function v(e,r){return e&&e.text?e.text:r}function w(e){var r=new RegExp("[?&]"+encodeURIComponent(e)+"=([^&]*)").exec(window.location.search);return null===r?"":decodeURIComponent(r[1].replace(/\+/g," "))}e((function(){var r=w("s"),v=w("error"),T=w("error_description"),I=w("RecordTypeId"),D=w("DA_Member_Type__c"),S=w("DA_Membership_Type__c"),x=w("Membership_Expiry_Date__pc"),M=w("DA_Expiry_after_grace_period__c"),L=e(".member-login-overlay");if(localStorage.getItem("dv_redirect_url"),I&&D&&S){var P={recordTypeId:I,memberType:D,membershipType:S,expiryDate:x,gracePeriodDate:M};!function(e){var r={recordTypeId:e.recordTypeId,memberType:e.memberType,membershipType:e.membershipType,expiryDate:e.expiryDate,gracePeriodDate:e.gracePeriodDate,timestamp:Date.now()};localStorage&&localStorage.setItem("dv_membership_data",JSON.stringify(r))}(P);var A=g(P),N=localStorage.getItem("dv_redirect_url");if(N&&function(e,r){if("none"===e||"expired"===e)return!1;try{var n=new URL(r,window.location.origin).pathname;return!(n.includes("/members-hub")||n.includes("/member-")||n.includes("/resource")||n.includes("/member-recipes"))||"free"===e||"full"===e}catch(e){return!1}}(A,N))return localStorage.removeItem("dv_redirect_url"),void(window.location.href=N);var k=function(e){switch(e){case"full":return y(c,p);case"free":return y(l,b);case"expired":return y(u,f);default:return y(d,h)}}(A);window.location.href=k}else{var H=_(),R=!!H,U=R?g(H):"none";if(1==n||"resource"==i||"member_recipes"==i){if(!t&&localStorage&&localStorage.setItem("dv_redirect_url",window.location.href),t||r)return void L.hide();if(!R)return void(window.location.href=y(m,s));if("none"===U||"expired"===U)return void(window.location.href="expired"===U?y(u,f):y(d,h));if(1==n&&"full_member_only"===a&&"free"===U)return void(window.location.href=y(l,b));L.hide()}else"/member-login/"===window.location.pathname||localStorage.removeItem("dv_redirect_url"),L.hide();if(v&&T)return L.show(),confirm("Error: Unable to login. Please try again.")?void(window.location.href=y(m,s)):void(window.location.href=o)}})),e(".btn-member-login").each((function(){var r=e(this),n=_(),t=!!n,o=t?g(n):"none";if(t){var i=v(c,"My Membership"),a=y(c,p);"none"===o?(i=v(d,"Join Membership"),a=y(d,h)):"expired"===o?(i=v(u,"Renew Membership"),a=y(u,f)):"free"===o?(i=v(l,"Free Member Hub"),a=y(l,b)):"full"===o&&(i=v(c,"My Membership"),a=y(c,p)),r.html("<span>"+i+"</span>"),r.attr("href",a)}else{var w=v(m,"Member Login"),T=y(m,s);r.html("<span>"+w+"</span>"),r.attr("href",T)}})),e(".btn-member-logout").each((function(){var r=e(this);_()?r.show():r.hide()})),e(document).on("click",".btn-member-logout",(function(e){if(e.preventDefault(),confirm("Are you sure you want to log out?"))return localStorage&&(localStorage.removeItem("dv_redirect_url"),localStorage.removeItem("dv_membership_data")),void(window.location.href=o)}))}));